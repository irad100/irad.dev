---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';
import { Image } from 'astro:assets';
import { Icon } from 'astro-icon/components';
const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
).slice(0, 3); // Get only the 3 most recent posts
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main class="bg-gray-gradient">
			<section class="text-center">
				<h1 class="text-5xl font-bold mb-4">Hello, I'm Irad üëãüèª</h1>
				<p class="text-xl text-site-gray max-w-2xl mx-auto">
					In this blog I write about my experiences and thoughts on security, AI, software
					engineering and other topics.
				</p>
			</section>
			<section class="mt-16">
				<h2 class="text-center text-5xl font-bold mb-4">About Me</h2>
				<div class="max-w-4xl mx-auto">
					<div class="flex flex-col md:flex-row gap-8 mt-4 items-center">
						<div class="md:w-1/3 flex-shrink-0">
							<Image
								src="/me.jpeg"
								alt="Irad Aharoni"
								width={300}
								height={300}
								class="rounded-lg"
							/>
						</div>
						<div class="flex-1">
							<p class="mb-4">
								I'm a software engineer and security researcher, passionate about building stuff,
								learning new things, and sharing knowledge.
							</p>
							<p>
								Currently working as a Senior Software Engineer and Security Researcher
								in the CTO Office at <a href="https://orca.security" class="text-gray-700 hover:text-gray-900 underline">Orca Security</a>.
							</p>
						</div>
					</div>
				</div>
				<div class="text-center mt-8">
					<a
						href="/about"
						class="btn btn-accent"
						role="button"
					>
						Learn More About Me ‚Üí
					</a>
				</div>
			</section>

			<section class="mt-16 text-center">
				<h2 class="text-5xl font-bold mb-4">Contact Me</h2>
				<p class="text-xl text-site-gray max-w-2xl mx-auto mb-8">
					Feel free to reach out! You can find me on the following platforms:
				</p>
				<div class="flex justify-center gap-6 items-center">
					<a href="mailto:irad.aharoni@gmail.com" class="btn btn-ghost btn-circle">
						<span class="sr-only">Send Me an Email</span>
						<Icon name="mdi:email" width="32" height="32" class="text-accent transition-transform duration-200 ease-in-out"/>
					</a>
					<a href="https://linkedin.com/in/iradaharoni" target="_blank" class="btn btn-ghost btn-circle">
						<span class="sr-only">Follow Me on LinkedIn</span>
						<Icon name="mdi:linkedin" width="32" height="32" class="text-accent transition-transform duration-200 ease-in-out"/>
					</a>
					<a href="https://github.com/irad100" target="_blank" class="btn btn-ghost btn-circle">
						<span class="sr-only">Go to My GitHub repo</span>
						<Icon name="mdi:github" width="32" height="32" class="text-accent transition-transform duration-200 ease-in-out"/>
					</a>	
				</div>
			</section>

			<section class="mt-16">
				<h2 class="text-5xl font-bold mb-8 text-center">Recent Posts</h2>
				<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
					{
						posts.map((post) => (
							<a 
								href={`/blog/${post.id}/`} 
								class="card card-compact bg-base-100 shadow-sm hover:shadow-lg transition-all duration-300 ease-in-out group border border-gray-light hover:border-accent hover:-translate-y-1"
							>
								<figure class="overflow-hidden">
									<img 
										src={post.data.heroImage} 
										alt="" 
										class="group-hover:scale-105 transition-transform duration-300 ease-in-out"
									/>
								</figure>
								<div class="card-body">
									<h4 class="card-title text-lg md:text-xl font-semibold mb-2 group-hover:text-accent transition-colors break-words">
										{post.data.title}
									</h4>
									<p class="text-sm text-site-gray mb-3">
										<FormattedDate date={post.data.pubDate} />
									</p>
									<p class="text-sm leading-relaxed">{post.data.description}</p>
								</div>
							</a>
						))
					}
				</div>
				<div class="text-center mt-6">
					<a 
						href="/blog" 
						class="btn btn-accent"
						role="button"
					>
						View All Posts ‚Üí
					</a>
				</div>
			</section>
		</main>
		<Footer />
	</body>
</html>
